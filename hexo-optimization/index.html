<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.loli.net/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|ZCOOL XiaoWei:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/5.10.0-11/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"qianling.pw","root":"/","scheme":"Muse","version":"7.7.1","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="h2{border-bottom:2px solid #8c8c8c;padding:0 5% 2px 0;} .post-body .note{padding-top:50px;} .s-fc-hd{color:#2aa198;} .f-fw{font-weight:bold;color:#3a87ad;} .s-fc-a{color:#1a95a5;}">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo 优化汇总">
<meta property="og:url" content="https://qianling.pw/hexo-optimization/index.html">
<meta property="og:site_name" content="千灵">
<meta property="og:description" content="h2{border-bottom:2px solid #8c8c8c;padding:0 5% 2px 0;} .post-body .note{padding-top:50px;} .s-fc-hd{color:#2aa198;} .f-fw{font-weight:bold;color:#3a87ad;} .s-fc-a{color:#1a95a5;}">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://qianling.pw/images/covers/90.jpg">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization1.webp">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization2.webp">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization3.webp">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization4.webp">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization5.webp">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization6.webp">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization7.png">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization8.png">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization9.png">
<meta property="og:image" content="https://qianling.pw/images/posts/hexo-optimization/hexo-optimization10.png">
<meta property="article:published_time" content="2017-07-30T00:56:08.000Z">
<meta property="article:modified_time" content="2020-02-19T02:25:54.740Z">
<meta property="article:author" content="千灵夙赋">
<meta property="article:tag" content="Hexo">
<meta property="article:tag" content="前端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://qianling.pw/images/covers/90.jpg">

<link rel="canonical" href="https://qianling.pw/hexo-optimization/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Hexo 优化汇总 | 千灵</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-141264217-1"></script>
    <script pjax>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-141264217-1');
      }
    </script>


  <script pjax>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b95f636e57f871a4ea1faeae2b4f30e5";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="千灵" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">千灵</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right"></div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-star-half-alt"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-democrat"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-dove"></i>分类</a>

  </li>
        <li class="menu-item menu-item-daily">

    <a href="/daily" rel="section"><i class="fa fa-fw fa-ghost"></i>碎念</a>

  </li>
        <li class="menu-item menu-item-play">

    <a href="/play" rel="section"><i class="fa fa-fw fa-fish"></i>游戏</a>

  </li>
        <li class="menu-item menu-item-comments">

    <a href="/comments" rel="section"><i class="fa fa-fw fa-dog"></i>留言</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-carrot"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
<script src="/js/custom/custom.js"></script>

<div class="top-scroll-bar"></div>

<!-- 点击特效 -->
<canvas class="fireworks" id="canvas" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
<script>
if( !/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)){
  document.write('<script type="text/javascript" src="//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"><\/script> <script type="text/javascript" src="/js/custom/fireworks.js"><\/script>');
}
</script>

<!-- 动态背景 -->
<script>
if( !/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)){
  document.write('<script type="text/javascript" src="/js/custom/jquery.backstretch.min.js"><\/script>');
}
</script>
<script type="text/javascript">
  $("body").backstretch([
    "https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/background/background%20(1).webp",
    "/images/background/background (2).webp",
    "/images/background/background (3).webp",
    "/images/background/background (4).webp",
    "/images/background/background (5).webp",
    "/images/background/background (6).webp",
    "/images/background/background (7).webp",
    "/images/background/background (8).webp",
  ], {duration: 20000, fade: 1000, animateFirst: true});
</script>

<!-- live2d -->
<div id="waifu">
  <div class="waifu-tips" style="opacity: 0;"></div>
  <canvas id="live2d" width="280" height="250" class="live2d"></canvas>
</div>
<script>
if( !/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)){
  document.write('<script type="text/javascript" src="/live2d/live2d.js"><\/script> <script type="text/javascript" src="/live2d/waifu-tips.js"><\/script>');
}
</script>

<!-- 打字礼花及震动特效 -->
<script>
if( !/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)){
  document.write('<script type="text/javascript" src="/js/custom/activate-power-mode.js"><\/script>');
}
</script>
<script>
    POWERMODE.colorful = true; // ture 为启用礼花特效
    POWERMODE.shake = false; // false 为禁用震动特效
    document.body.addEventListener('input', POWERMODE);
</script>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-chevron-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qianling.pw/hexo-optimization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="千灵夙赋">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="千灵">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hexo 优化汇总
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间 2017-07-30 08:56:08" itemprop="dateCreated datePublished" datetime="2017-07-30T08:56:08+08:00">2017-07-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间 2020-02-19 10:25:54" itemprop="dateModified" datetime="2020-02-19T10:25:54+08:00">2020-02-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>
            </span>

          
            <span id="/hexo-optimization/" class="post-meta-item leancloud_visitors" data-flag-title="Hexo 优化汇总" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数 </span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
  <i class="far fa-comment"></i>
    <a title="valine" href="/hexo-optimization/#valine-comments" itemprop="discussionUrl">
     评论数
      <span class="post-comments-count valine-comment-count" data-xid="/hexo-optimization/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img data-src="/images/covers/90.jpg" alt=""></p>

<style>
h2{border-bottom:2px solid #8c8c8c;padding:0 5% 2px 0;}
.post-body .note{padding-top:50px;}
.s-fc-hd{color:#2aa198;}
.f-fw{font-weight:bold;color:#3a87ad;}
.s-fc-a{color:#1a95a5;}
</style>


<a id="more"></a>

<hr>
<blockquote class="blockquote-center"><p><span style="font-size:18px;font-weight:600;color:grey">~o( =∩ω∩= )m</span></p>
</blockquote>
<h2 id="1-设定自定义文件"><a href="#1-设定自定义文件" class="headerlink" title="1. 设定自定义文件"></a><span class="section-number">1.</span> <span class="s-fc-hd">设定自定义文件</span></h2><p><span class="f-fw">打开　</span><code>\themes\_config.yml</code></p>
<p><span class="f-fw">查找　</span><code>custom_file_path</code></p>
<p><span class="f-fw">取消下面几个文件的注释：</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">header: source/_data/header.swig</span><br><span class="line">sidebar: source/_data/sidebar.swig</span><br><span class="line">variable: source/_data/variables.styl</span><br><span class="line">mixin: source/_data/mixins.styl</span><br><span class="line">style: source/_data/styles.styl</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开文件夹 js　</span><code>\blog\themes\next\source\js</code></p>
<p><span class="f-fw">新建文件夹　</span><code>custom</code></p>
<p><span class="f-fw">在 custom 文件夹内新建文件　</span><code>custom.js</code></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\header.swig</code></p>
<p><span class="f-fw">添加　</span><code>&lt;script src=&quot;/js/custom/custom.js&quot;&gt;&lt;/script&gt;</code></p>
<br/>

<h2 id="2-CNPM"><a href="#2-CNPM" class="headerlink" title="2. CNPM"></a><span class="section-number">2.</span> <span class="s-fc-hd">CNPM</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="http://npm.taobao.org/">淘宝 NPM 镜像</a></span>
          </div>

<p>这是一个完整 <strong>npmjs.org</strong> 镜像，你可以用此代替官方版本（只读），同步频率目前为 10 分钟 一次以保证尽量与官方服务器同步。</p>
<p>在 <strong>npm</strong> 无法同步时提供帮助。</p>
<p><span class="f-fw">打开命令行窗口</span></p>
<p><span class="f-fw">安装　</span><code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code></p>
<p><span class="f-fw">指令</span></p>
<p><strong># 安装模块</strong></p>
<p>从 <a href="https://registry.npm.taobao.org/">registry.npm.taobao.org</a> 安装所有模块。当安装的时候发现安装的模块还没有同步过来，淘宝 NPM 会自动在后台进行同步，并且会让你从官方 NPM <a href="https://registry.npm.taobao.org/">registry.npm.taobao.org</a> 进行安装。下次你再安装这个模块的时候，就会直接从 淘宝 NPM 安装了。</p>
<p><code>$ cnpm install [name]</code></p>
<p><strong># 同步模块</strong></p>
<p>直接通过 <code>sync</code> 命令马上同步一个模块, 只有 <code>cnpm</code> 命令行才有此功能:</p>
<p><code>$ cnpm sync connect</code></p>
<p>当然, 你可以直接通过 web 方式来同步: <a href="https://npm.taobao.org/sync/connect"> /sync/connect </a></p>
<p><code>$ open https://npm.taobao.org/sync/connect</code></p>
<p><strong># 其它命令</strong></p>
<p>支持 <code>npm</code> 除了 <code>publish</code> 之外的所有命令, 如:</p>
<p><code>$ cnpm info connect</code></p>
<br/>

<h2 id="3-Hexo-页面自动刷新"><a href="#3-Hexo-页面自动刷新" class="headerlink" title="3. Hexo 页面自动刷新"></a><span class="section-number">3.</span> <span class="s-fc-hd">Hexo 页面自动刷新</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="http://moxfive.xyz/2016/03/27/hexo-browsersync/">MOxFIVE</a></span>
          </div>
<p>经常本地调试 Hexo 主题, 如果有工具能监视文件更改幷自动刷新页面，那一定能提高不少效率，Browsersync 就是这样一款浏览器同步测试工具。</p>
<p><span class="f-fw">安装　</span></p>
<p>在Hexo根目录下运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g browser-sync</span><br><span class="line">npm install hexo-browsersync --save</span><br></pre></td></tr></table></figure>
<p>安装后像往常一样执行 <code>hexo s</code> 开启本地服务器，当相关文件被修改或者保存时，关联的浏览器页面会自带刷新</p>
<p><span class="f-fw">不足</span></p>
<ul>
<li>变动后将重新加载整个页面，不能局部刷新</li>
<li>使用 Hexo 自带服务器时，无法在移动端调试</li>
<li>md 文件过大时界面无法加载</li>
</ul>
<br/>

<h2 id="4-InstantClick"><a href="#4-InstantClick" class="headerlink" title="4. InstantClick"></a><span class="section-number">4.</span> <span class="s-fc-hd">InstantClick</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://www.liuxinggang.com/2016-12-06-hexo%E5%8D%9A%E5%AE%A2%E8%BF%9B%E9%98%B6%EF%BC%8D%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">刘兴刚博客</a></span>
          </div>

<p><strong>Next 主题 现已集成 quicklink</strong></p>
<p>通常，我们为了减少 <strong>DNS</strong> 的查询时间，使用 <strong>dns prefetch</strong> 为该页面中的链接做解析，提升页面的加载速度。类似的，我们可以在鼠标滑到链接上到点击的时间间隙去加载这个页面，通常这个间隙有几百毫秒，利用 <strong>InstantClick</strong>，我们可以充分利用这几百毫秒，让网站能够瞬间显示新页面，几乎没有延迟。</p>
<p>但是 <strong>InstantClick</strong> 并不能滥用，许多 <strong>js</strong> 无法与它兼容，如<strong>谷歌分析</strong>、<strong>百度统计</strong>以及 <strong>fancybox</strong>。</p>
<p>初始化并解决部分 <strong>js</strong> 无法加载的问题：</p>
<p><span class="f-fw">打开　</span><code>\themes\next\layout\_partials\head.swig</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"\js\custom\instantclick.min.js"</span> data-no-instant&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">   &lt;script data-no-instant&gt;</span></span><br><span class="line"><span class="regexp">   InstantClick.on('change', function(isInitialLoad) &#123;</span></span><br><span class="line"><span class="regexp">   if (isInitialLoad === false) &#123;</span></span><br><span class="line"><span class="regexp">     if (typeof MathJax !== 'undefined') /</span><span class="regexp">/ support MathJax</span></span><br><span class="line"><span class="regexp">     MathJax.Hub.Queue(["Typeset",MathJax.Hub]);</span></span><br><span class="line"><span class="regexp">     if (typeof prettyPrint !== 'undefined') /</span><span class="regexp">/ support google code prettify</span></span><br><span class="line"><span class="regexp">     prettyPrint();</span></span><br><span class="line"><span class="regexp">     if (typeof _hmt !== 'undefined')  /</span><span class="regexp">/ support 百度统计</span></span><br><span class="line"><span class="regexp">     _hmt.push(['_trackPageview', location.pathname + location.search]);</span></span><br><span class="line"><span class="regexp">     if (typeof ga !== 'undefined')  /</span><span class="regexp">/ support google analytics</span></span><br><span class="line"><span class="regexp">       ga('send', 'pageview', location.pathname + location.search);</span></span><br><span class="line"><span class="regexp">   &#125;</span></span><br><span class="line"><span class="regexp">   &#125;);</span></span><br><span class="line"><span class="regexp">   InstantClick.init();</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">下载　</span><i class="fa fa-download"></i> <a href="http://instantclick.io/v3.1.0/instantclick.min.js">instantclick.min.js</a></p>
<p><span class="f-fw">打开　</span><code>\themes\next\source\js\custom\</code></p>
<p><span class="f-fw">放置　</span><code>instantclick.min.js</code></p>
<p>这时候对于所有链接都开启<strong>预加载模式</strong>，但可以把部分链接加入黑名单：<br><code>&lt;a href=&quot;\blog\&quot; data-no-instant&gt;Blog&lt;/a&gt;</code></p>
<br/>

<h2 id="5-压缩"><a href="#5-压缩" class="headerlink" title="5. 压缩"></a><span class="section-number">5.</span> <span class="s-fc-hd">压缩</span></h2><h3 id="5-1-Gulp"><a href="#5-1-Gulp" class="headerlink" title="5.1. Gulp"></a>5.1. Gulp</h3><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://chanshiyu.com/">蝉時雨</a></span>
          </div>
<p><strong>gulp.js</strong> 是基于流的自动化构建工具，我们可以使用 <strong>Gulp</strong> 为 Hexo 压缩文件</p>
<p><span class="f-fw">在 \blog\ 打开命令行窗口</span></p>
<p><span class="f-fw">安装</span></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp --save</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">再根据需要安装以下模块</span></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-minify-css --save</span><br><span class="line">npm install gulp-uglify --save</span><br><span class="line">npm install gulp-htmlmin --save</span><br><span class="line">npm install gulp-htmlclean --save</span><br><span class="line">npm install gulp-imagemin --save</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\blog\</code></p>
<p><span class="f-fw">新建　</span><code>gulpfile.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</span><br><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">'gulp-htmlmin'</span>);</span><br><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">'gulp-htmlclean'</span>);</span><br><span class="line"><span class="keyword">var</span> imagemin = <span class="built_in">require</span>(<span class="string">'gulp-imagemin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩html文件</span></span><br><span class="line">gulp.task(<span class="string">'minify-html'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.html'</span>)</span><br><span class="line">  .pipe(htmlclean())</span><br><span class="line">  .pipe(htmlmin(&#123;</span><br><span class="line">  removeComments: <span class="literal">true</span>,</span><br><span class="line">  minifyJS: <span class="literal">true</span>,</span><br><span class="line">  minifyCSS: <span class="literal">true</span>,</span><br><span class="line">  minifyURLs: <span class="literal">true</span>,</span><br><span class="line">  &#125;))</span><br><span class="line">  .pipe(gulp.dest(<span class="string">'./public'</span>))</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩css文件</span></span><br><span class="line">gulp.task(<span class="string">'minify-css'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.css'</span>)</span><br><span class="line">  .pipe(minifycss())</span><br><span class="line">  .pipe(gulp.dest(<span class="string">'./public'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩js文件</span></span><br><span class="line">gulp.task(<span class="string">'minify-js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.src([<span class="string">'./public/**/.js'</span>,<span class="string">'!./public/js/**/*min.js'</span>])</span><br><span class="line">  .pipe(uglify())</span><br><span class="line">  .pipe(gulp.dest(<span class="string">'./public'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩 public/images 目录内图片</span></span><br><span class="line">gulp.task(<span class="string">'minify-images'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.src(<span class="string">'./public/images/**/*.*'</span>)</span><br><span class="line">  .pipe(imagemin(&#123;</span><br><span class="line">     optimizationLevel: <span class="number">5</span>, <span class="comment">//类型：Number  默认：3  取值范围：0-7（优化等级）</span></span><br><span class="line">     progressive: <span class="literal">true</span>, <span class="comment">//类型：Boolean 默认：false 无损压缩jpg图片</span></span><br><span class="line">     interlaced: <span class="literal">false</span>, <span class="comment">//类型：Boolean 默认：false 隔行扫描gif进行渲染</span></span><br><span class="line">     multipass: <span class="literal">false</span>, <span class="comment">//类型：Boolean 默认：false 多次优化svg直到完全优化</span></span><br><span class="line">  &#125;))</span><br><span class="line">  .pipe(gulp.dest(<span class="string">'./public/uploads'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 默认任务 gulp 4.0 适用的方式</span></span><br><span class="line">gulp.task(<span class="string">'default'</span>, gulp.parallel(<span class="string">'minify-html'</span>, <span class="string">'minify-css'</span>, <span class="string">'minify-js'</span>, <span class="string">'minify-images'</span></span><br><span class="line"> <span class="comment">//build the website</span></span><br><span class="line">));</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">依照格式，删除未安装模块的代码部分</span></p>
<p><span class="f-fw">在命令行内输入 <code>$ gulp</code> 即可运行</span></p>
<p><span class="f-fw">一键同步代码参照　<a href="#7"><span class="s-fc-a">7. 批处理脚本自动创建文章及一键部署</span></a></span></p>
<p><span class="f-fw">把因删除空格缩小的间距调整回来：</span></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// gulp 间距调整</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-class">.leancloud-visitors-count</span>, <span class="selector-tag">span</span><span class="selector-class">.post-comments-count</span><span class="selector-class">.valine-comment-count</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">i</span><span class="selector-class">.fa</span><span class="selector-class">.fa-ravelry</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br />

<h3 id="5-2-hexo-neat"><a href="#5-2-hexo-neat" class="headerlink" title="5.2. hexo-neat"></a>5.2. hexo-neat</h3><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://blog.csdn.net/lewky_liu/article/details/82432003">Hexo瞎折腾系列(5) - 使用hexo-neat插件压缩页面静态资源</a></span>
          </div>

<p><strong>已知 BUG：</strong></p>
<ul>
<li><strong>压缩 md 文件会使 markdown 语法的代码块消失</strong></li>
<li><strong>会删除全角空格</strong></li>
</ul>
<p><span class="f-fw">安装　</span><code>npm install hexo-neat --save</code></p>
<p><span class="f-fw">打开　</span><code>\blog\_config.yml</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-neat</span></span><br><span class="line"><span class="comment"># 开关</span></span><br><span class="line"><span class="attr">neat_enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 压缩 html</span></span><br><span class="line"><span class="attr">neat_html:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">'**/*.md'</span></span><br><span class="line"><span class="comment"># 压缩 css</span></span><br><span class="line"><span class="attr">neat_css:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">'**/*.min.css'</span></span><br><span class="line"><span class="comment"># 压缩 js</span></span><br><span class="line"><span class="attr">neat_js:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mangle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">output:</span></span><br><span class="line">  <span class="attr">compress:</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">'**/*.min.js'</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">'**/jquery.fancybox.pack.js'</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">'**/index.js'</span></span><br></pre></td></tr></table></figure>

<br/>

<h2 id="6-Service-Worker"><a href="#6-Service-Worker" class="headerlink" title="6. Service Worker"></a><span class="section-number">6.</span> <span class="s-fc-hd">Service Worker</span></h2><div class="note info">
            <span class="f-fw">教程　<a class="s-fc-a" href="https://qianling.pw/service-worker/">Hexo 部署 Service Worker</a></span>
          </div>

<div class="f-fw">

<p>Service workers 本质上充当 Web 应用程序与浏览器之间的代理服务器，为了适应越来越多的网页应用而产生。</p>
<p>它可以通过拦截并修改访问和资源请求，缓存特定的网页资源，并可以将网页做到离线可用；</p>
<p>同时 Service Workers 也能做到定期后台同步与信息推送。</p>
<p>部署成功后，您可以节省用户流量、提升页面二次加载速度等。</p>
</div>

<br/>

<h2 id="7-批处理脚本自动创建文章及一键部署"><a href="#7-批处理脚本自动创建文章及一键部署" class="headerlink" title="7. 批处理脚本自动创建文章及一键部署"></a><span class="section-number">7.</span> <span class="s-fc-hd"><a id="7"></a>批处理脚本自动创建文章及一键部署</span></h2><p><span class="f-fw">打开　</span><code>\blog\</code></p>
<p><span class="f-fw">新建　</span><code>新建文章.bat</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> <span class="string">"a=%date:~,4%"</span></span><br><span class="line"><span class="built_in">set</span> <span class="string">"b=%date:~5,2%"</span></span><br><span class="line"><span class="built_in">set</span> <span class="string">"c=%date:~8,2%"</span></span><br><span class="line">hexo new <span class="string">"%a%-%b%-%c%"</span></span><br></pre></td></tr></table></figure>

<p><span class="f-fw">命名格式为　<code>年-月-日.md</code></span></p>
<p><span class="f-fw">部署可写为　</span><code>hexo clean &amp; hexo g -d</code></p>
<p><span class="f-fw">若使用 gulp 则写为　</span><code>hexo clean &amp; hexo g &amp;&amp; gulp &amp; hexo deploy</code></p>
<br/>

<h2 id="8-根据邮箱自定义评论头像"><a href="#8-根据邮箱自定义评论头像" class="headerlink" title="8. 根据邮箱自定义评论头像"></a><span class="section-number">8.</span> <span class="s-fc-hd">根据邮箱自定义评论头像</span></h2><div class="note info">
            <span class="f-fw">来自　<a class="s-fc-a" href="https://meow3.family.blog/">恶魔菌の记事簿</a>　小姐姐的建议</span>
          </div>
<p><span class="f-fw">打开　</span><a href="https://cn.gravatar.com/"><span class="f-fw">Gravatar</span></a></p>
<p><span class="f-fw">注册并上传图片</span></p>
<p><span class="f-fw">之后即可在支持填写邮箱的评论插件中使用自己的头像啦</span></p>
<p><span class="f-fw">如果头像没有生效的话清除下网站缓存就行啦</span></p>
<br/>

<h2 id="9-修改分类层级显示"><a href="#9-修改分类层级显示" class="headerlink" title="9. 修改分类层级显示"></a><span class="section-number">9.</span> <span class="s-fc-hd">修改分类层级显示</span></h2><h3 id="9-1-修改-post-swig"><a href="#9-1-修改-post-swig" class="headerlink" title="9.1. 修改 post.swig"></a>9.1. 修改 post.swig</h3><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="http://yuchen-lea.github.io/2016-01-23-display-hexo-category-in-hierarchy/">跬步</a></span>
          </div>

<p><img data-src="/images/posts/hexo-optimization/hexo-optimization1.webp" alt=""></p>
<p><span class="f-fw">打开</span>　<code>\themes\next\layout\_macro\post.swig</code></p>
<p><span class="f-fw">查找</span></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; __(<span class="string">'symbol.comma'</span>) &#125;&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">改为　</span></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; __(<span class="string">'&gt;'</span>) &#125;&#125;</span><br></pre></td></tr></table></figure>
<br/>

<h3 id="9-2-修改-custom-styl"><a href="#9-2-修改-custom-styl" class="headerlink" title="9.2. 修改 custom.styl"></a>9.2. 修改 custom.styl</h3><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://www.zhihu.com/question/57888214/answer/154699381">孔晨皓</a></span>
          </div>


<p><img data-src="/images/posts/hexo-optimization/hexo-optimization2.webp" alt=""></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.category-list</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">li</span>:before &#123;</span><br><span class="line">    content: <span class="string">'&gt;&gt;'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="10-添加标题底部横线"><a href="#10-添加标题底部横线" class="headerlink" title="10. 添加标题底部横线"></a><span class="section-number">10.</span> <span class="s-fc-hd">添加标题底部横线</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="http://yuchen-lea.github.io/">跬步</a></span>
          </div>

<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span>, <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">2px</span> solid <span class="number">#8c8c8c</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">5%</span> <span class="number">2px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="11-修改页脚文字"><a href="#11-修改页脚文字" class="headerlink" title="11. 修改页脚文字"></a><span class="section-number">11.</span> <span class="s-fc-hd">修改页脚文字</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="http://rockzhou.tk/2016/03/22/%E7%BB%99-HEXO-%E5%8D%9A%E5%AE%A2%E8%87%AA%E5%AE%9A%E4%B9%89%E8%83%8C%E6%99%AF%E5%9B%BE/">RockZhou's Blog</a></span>
          </div>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 底部字体</span><br><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: $fontColor;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  +mobile() &#123;</span><br><span class="line">    <span class="selector-tag">font-size</span>: 12<span class="selector-tag">px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.busuanzi-value</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="12-设置背景图片"><a href="#12-设置背景图片" class="headerlink" title="12. 设置背景图片"></a><span class="section-number">12.</span> <span class="s-fc-hd">设置背景图片</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="http://rockzhou.tk/2016/03/22/%E7%BB%99-HEXO-%E5%8D%9A%E5%AE%A2%E8%87%AA%E5%AE%9A%E4%B9%89%E8%83%8C%E6%99%AF%E5%9B%BE/">RockZhou's Blog</a></span>
          </div>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 背景图片</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(/images/background.jpg);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">  <span class="attribute">background-position</span>: <span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="13-去除-more-标签"><a href="#13-去除-more-标签" class="headerlink" title="13. 去除 #more 标签"></a><span class="section-number">13.</span> <span class="s-fc-hd">去除 #more 标签</span></h2><div class="note info">
            <span class="f-fw">本节指导自　<a class="s-fc-a" href="http://shenzekun.cn/">Moorez</a></span>
          </div>

<p><span class="f-fw">打开　</span><code>\themes\next\layout\_macro\post.swig</code></p>
<p><span class="f-fw">搜索　</span><code>#more</code></p>
<p><span class="f-fw">删除即可</span></p>
<br/>

<h2 id="14-记忆浏览位置"><a href="#14-记忆浏览位置" class="headerlink" title="14. 记忆浏览位置"></a><span class="section-number">14.</span> <span class="s-fc-hd">记忆浏览位置</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://stackoverflow.com/questions/38750414/store-and-recover-scroll-position-using-cookies-in-javascript">Stack Overflow</a></span>
          </div>

<p><strong>关闭本页，重新打开，会停留在刚才的浏览进度。</strong></p>
<p><strong>Next 的 bookmark icon 加载失败，因此自己添加该功能</strong></p>
<p><span class="f-fw">打开　</span><code>\themes\next\source\js\custom\custom.js</code></p>
<p><span class="f-fw">添加　</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 记忆浏览位置</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (localStorage.tempScrollTop) &#123;</span><br><span class="line">    $(<span class="built_in">window</span>).scrollTop(localStorage.tempScrollTop);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="built_in">window</span>).on(<span class="string">"scroll"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  localStorage.setItem(<span class="string">"tempScrollTop"</span>, $(<span class="built_in">window</span>).scrollTop());</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">window</span>.onbeforeunload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> tempScrollTop = $(<span class="built_in">window</span>).scrollTop();</span><br><span class="line">  localStorage.setItem(<span class="string">"tempScrollTop"</span>, tempScrollTop);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="15-修改页宽"><a href="#15-修改页宽" class="headerlink" title="15. 修改页宽"></a><span class="section-number">15.</span> <span class="s-fc-hd">修改页宽</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://hexo-guide.readthedocs.io/zh_CN/latest/theme/[NexT]%E8%B0%83%E6%95%B4%E9%A1%B5%E9%9D%A2%E5%AE%BD%E5%BA%A6.html">[NexT]调整页面宽度</a></span>
          </div>

<p><span class="f-fw">打开　</span><code>\blog\source\_data\variables.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$content-desktop                = 850px</span><br><span class="line">$content-desktop-large          = 950px</span><br><span class="line">$content-desktop-largest        = 1100px</span><br></pre></td></tr></table></figure>

<p><strong>数值改为百分比会导致在屏宽较小的显示器上，侧边栏打开时内容缩放，使得目录与文字不匹配。</strong></p>
<br/>

<h2 id="16-分类和标签界面显示年份"><a href="#16-分类和标签界面显示年份" class="headerlink" title="16. 分类和标签界面显示年份"></a><span class="section-number">16.</span> <span class="s-fc-hd">分类和标签界面显示年份</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html">reuixiv</a></span>
          </div>
<h3 id="16-1-修改-category-swig"><a href="#16-1-修改-category-swig" class="headerlink" title="16.1. 修改 category.swig"></a>16.1. 修改 category.swig</h3><p><span class="f-fw">打开　</span><code>\themes\next\layout\category.swig</code></p>
<p><span class="f-fw">查找</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for post in page.posts %&#125;</span><br><span class="line">  &#123;&#123; post_template.render(post) &#125;&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">改为　</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for post in page.posts %&#125;</span><br><span class="line">  &#123;# Show year #&#125;</span><br><span class="line">  &#123;% set year %&#125;</span><br><span class="line">  &#123;% set post.year = date(post.date, 'YYYY') %&#125;</span><br><span class="line">  &#123;% if post.year !== year %&#125;</span><br><span class="line">  &#123;% set year = post.year %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"collection-title"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"archive-year motion-element"</span> <span class="attr">id</span>=<span class="string">"archive-year-&#123;&#123; year &#125;&#125;"</span>&gt;</span>&#123;&#123; year &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">  &#123;# endshow #&#125;</span><br><span class="line">  &#123;&#123; post_template.render(post) &#125;&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">添加</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block script_extra %&#125;</span><br><span class="line">  &#123;% if theme.use_motion %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">id</span>=<span class="string">"motion.page.archive"</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="string">'.archive-year'</span>).velocity(<span class="string">'transition.slideLeftIn'</span>);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-2-修改-tag-swig"><a href="#16-2-修改-tag-swig" class="headerlink" title="16.2. 修改 tag.swig"></a>16.2. 修改 tag.swig</h3><p><span class="f-fw">打开　</span><code>\themes\next\layout\tag.swig</code></p>
<p><span class="f-fw">查找</span></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">for</span> post <span class="keyword">in</span> page.posts %&#125;</span><br><span class="line">  &#123;&#123; post_template.render(post) &#125;&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">改为　</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for post in page.posts %&#125;</span><br><span class="line">  &#123;# Show year #&#125;</span><br><span class="line">  &#123;% set year %&#125;</span><br><span class="line">  &#123;% set post.year = date(post.date, 'YYYY') %&#125;</span><br><span class="line">  &#123;% if post.year !== year %&#125;</span><br><span class="line">  &#123;% set year = post.year %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"collection-title"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"archive-year motion-element"</span> <span class="attr">id</span>=<span class="string">"archive-year-&#123;&#123; year &#125;&#125;"</span>&gt;</span>&#123;&#123; year &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">  &#123;# endshow #&#125;</span><br><span class="line">  &#123;&#123; post_template.render(post) &#125;&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">添加</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block script_extra %&#125;</span><br><span class="line">  &#123;% if theme.use_motion %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">id</span>=<span class="string">"motion.page.archive"</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="string">'.archive-year'</span>).velocity(<span class="string">'transition.slideLeftIn'</span>);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="17-滚动条美化"><a href="#17-滚动条美化" class="headerlink" title="17. 滚动条美化"></a><span class="section-number">17.</span> <span class="s-fc-hd">滚动条美化</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://isudox.com/2016/07/14/customize-hexo-theme/">I sudo X</a></span>
          </div>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">::-webkit-scrollbar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:start</span><span class="selector-pseudo">:increment</span>,<span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:end</span><span class="selector-pseudo">:decrement</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-corner</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-thumb</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-thumb</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-track</span>,<span class="selector-pseudo">::-webkit-scrollbar-thumb</span> &#123;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">1px</span> solid transparent;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">1px</span> solid transparent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-track</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">15</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:start</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(../images/scrollbar_arrow.png) no-repeat <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:start</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(../images/scrollbar_arrow.png) no-repeat -<span class="number">15px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:start</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(../images/scrollbar_arrow.png) no-repeat -<span class="number">30px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:end</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(../images/scrollbar_arrow.png) no-repeat <span class="number">0</span> -<span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:end</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(../images/scrollbar_arrow.png) no-repeat -<span class="number">15px</span> -<span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-button</span><span class="selector-pseudo">:end</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(../images/scrollbar_arrow.png) no-repeat -<span class="number">30px</span> -<span class="number">18px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">下载　</span><a id="download" href="http://qianling.image.alimmdn.com/scrollbar-arrow.png?t=1501300575329"><i class="fa fa-download"></i><span>scrollbar_arrow.png</span></a></p>
<br/>

<h2 id="18-畅言加载优化"><a href="#18-畅言加载优化" class="headerlink" title="18. 畅言加载优化"></a><span class="section-number">18.</span> <span class="s-fc-hd">畅言加载优化</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://www.liuxinggang.com/2016-12-06-hexo%E5%8D%9A%E5%AE%A2%E8%BF%9B%E9%98%B6%EF%BC%8D%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">刘兴刚博客</a></span>
          </div>
<p>将畅言依赖的<code>embed.js</code>放至底部</p>
<p><span class="f-fw">打开　</span><code>\themes\next\layout\_third-party\comments\changyan.swig</code></p>
<p><span class="f-fw">查找　</span><code>document.getElementsByTagName(&quot;head&quot;)[0]</code></p>
<p><span class="f-fw">改为　</span><code>document.getElementsByTagName(&quot;footer&quot;)[0]</code></p>
<br/>

<h2 id="19-畅言去版权"><a href="#19-畅言去版权" class="headerlink" title="19. 畅言去版权"></a><span class="section-number">19.</span> <span class="s-fc-hd">畅言去版权</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="http://www.hao7di.com/haowen/wangluojiqiao/312.html">好基地</a></span>
          </div>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.module-cmt-notice</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-class">.section-service-w</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.module-cmt-box</span> <span class="selector-class">.post-wrap-w</span> <span class="selector-class">.post-wrap-main</span>&#123;<span class="attribute">background</span>:none;<span class="attribute">background-image</span>:<span class="built_in">url</span>(https://i.loli.net/<span class="number">2017</span>/<span class="number">08</span>/<span class="number">05</span>/<span class="number">5985668</span>d58744.png) <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span>&#123;<span class="attribute">position</span>:relative;<span class="attribute">z-index</span>:<span class="number">0</span> <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span> <span class="selector-class">.platform-login</span> <span class="selector-class">.split-hr</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-class">.phone-login</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span><span class="selector-class">.changyan-login-dialog-wrapper-main</span>&#123;<span class="attribute">height</span>:<span class="number">250px</span> <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span> <span class="selector-class">.platform-login</span> <span class="selector-class">.login-group</span> <span class="selector-class">.login-item</span> <span class="selector-class">.login-logo-phone</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span> <span class="selector-class">.platform-login</span> <span class="selector-class">.login-instruction</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span> <span class="selector-class">.platform-login</span> <span class="selector-class">.login-group</span> <span class="selector-class">.login-item</span> <span class="selector-class">.login-logo-wechat</span>&#123;<span class="attribute">display</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span><span class="selector-class">.changyan-login-dialog-wrapper-main</span>&#123;<span class="attribute">background</span>:none;<span class="attribute">background-image</span>:<span class="built_in">url</span>(https://i.loli.net/<span class="number">2017</span>/<span class="number">08</span>/<span class="number">05</span>/<span class="number">59856762568</span>bb.png) <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.changyan-login-dialog-wrapper</span> <span class="selector-class">.cy-logo</span>&#123;<span class="attribute">background</span>:none <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.module-cmt-box</span> <span class="selector-class">.post-wrap-w</span> <span class="selector-class">.wrap-action-w</span> <span class="selector-class">.action-issue-w</span> <span class="selector-class">.issue-btn-w</span> <span class="selector-tag">a</span> <span class="selector-class">.btn-fw</span>&#123;<span class="attribute">background</span>:none;<span class="attribute">background-image</span>:<span class="built_in">url</span>(https://i.loli.net/<span class="number">2017</span>/<span class="number">08</span>/<span class="number">05</span>/<span class="number">5985612</span>ad66f5.png) <span class="meta">!important</span>;&#125;</span><br><span class="line"><span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.module-cmt-footer</span> <span class="selector-class">.section-service-w</span>, <span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.module-cmt-footer</span> <span class="selector-class">.section-service-w</span> <span class="selector-class">.service-wrap-w</span>, <span class="selector-id">#SOHUCS</span> <span class="selector-id">#SOHU_MAIN</span> <span class="selector-class">.module-cmt-footer</span> <span class="selector-class">.section-service-w</span> <span class="selector-class">.service-wrap-w</span> <span class="selector-tag">a</span>&#123;<span class="attribute">height</span>:<span class="number">0px</span> <span class="meta">!important</span>;<span class="attribute">overflow</span>:hidden <span class="meta">!important</span>;&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="20-代码块复制功能"><a href="#20-代码块复制功能" class="headerlink" title="20. 代码块复制功能"></a><span class="section-number">20.</span> <span class="s-fc-hd">代码块复制功能</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://zhuzhuyule.com/blog/HEXO/HEXO%E4%BC%98%E5%8C%96%E4%B9%8B%EF%BC%88%E4%BA%8C%EF%BC%89-%E6%B7%BB%E5%8A%A0%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD.html/">猪猪娱乐</a></span>
          </div>

<p><strong>更新主题至 5.1.3 后失效，主题已自带复制功能</strong></p>
<h3 id="20-1-下载-clipboard-js"><a href="#20-1-下载-clipboard-js" class="headerlink" title="20.1. 下载 clipboard.js"></a>20.1. 下载 <a href="https://github.com/zenorocha/clipboard.js/"><code>clipboard.js</code></a></h3><p><span class="f-fw">任选其一　</span></p>
<p><i class="fa fa-download"></i> <a href="https://raw.githubusercontent.com/zenorocha/clipboard.js/master/dist/clipboard.js"><code>clipboard.js</code></a></p>
<p><i class="fa fa-download"></i> <a href="https://raw.githubusercontent.com/zenorocha/clipboard.js/master/dist/clipboard.min.js"><code>clipboard.min.js</code></a>（<i class="fa fa-fire"></i> 推荐）</p>
<p><span class="f-fw">打开</span>　<code>\themes\next\source\lib\</code></p>
<p><span class="f-fw">新建文件夹</span>　<code>zclip</code></p>
<p><span class="f-fw">放置</span>　<code>clipboard.js／clipboard.min.js</code></p>
<br/>

<h3 id="20-2-插入-JavaScript"><a href="#20-2-插入-JavaScript" class="headerlink" title="20.2. 插入 JavaScript"></a>20.2. 插入 JavaScript</h3><p><span class="f-fw">打开</span>　<code>\themes\next\source\js\</code></p>
<p><span class="f-fw">新建</span>　<code>custom.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//此函数用于创建复制按钮</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCopyBtns</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $codeArea = $(<span class="string">"figure table"</span>);</span><br><span class="line">  <span class="comment">//查看页面是否具有代码区域，没有代码块则不创建 复制按钮</span></span><br><span class="line">  <span class="keyword">if</span> ($codeArea.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">//复制成功后将要干的事情</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">changeToSuccess</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">       $imgOK = $(<span class="string">"#copyBtn"</span>).find(<span class="string">"#imgSuccess"</span>);</span><br><span class="line">        <span class="keyword">if</span> ($imgOK.css(<span class="string">"display"</span>) == <span class="string">"none"</span>) &#123;</span><br><span class="line">          $imgOK.css(&#123;</span><br><span class="line">            opacity: <span class="number">0</span>,</span><br><span class="line">            display: <span class="string">"block"</span></span><br><span class="line">          &#125;);</span><br><span class="line">          $imgOK.animate(&#123;</span><br><span class="line">            opacity: <span class="number">1</span></span><br><span class="line">          &#125;, <span class="number">1000</span>);</span><br><span class="line">          setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $imgOK.animate(&#123;</span><br><span class="line">              opacity: <span class="number">0</span></span><br><span class="line">            &#125;, <span class="number">2000</span>);</span><br><span class="line">          &#125;, <span class="number">2000</span>);</span><br><span class="line">          setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $imgOK.css(<span class="string">"display"</span>, <span class="string">"none"</span>);</span><br><span class="line">          &#125;, <span class="number">4000</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//创建 全局复制按钮，仅有一组。包含：复制按钮，复制成功响应按钮</span></span><br><span class="line">    <span class="comment">//值得注意的是：1.按钮默认隐藏，2.位置使用绝对位置 position: absolute; (position: fixed 也可以，需要修改代码)</span></span><br><span class="line">    $(<span class="string">".post-body"</span>).before(<span class="string">'&lt;div id="copyBtn" style="opacity: 0; position: absolute;top:0px;display: none;line-height: 1; font-size:1.5em"&gt;&lt;span id="imgCopy" &gt;&lt;i class="fa fa-paste fa-fw"&gt;&lt;/i&gt;&lt;/span&gt;&lt;span id="imgSuccess" style="display: none;"&gt;&lt;i class="fa fa-check-circle fa-fw" aria-hidden="true"&gt;&lt;/i&gt;&lt;/span&gt;'</span>);</span><br><span class="line">    <span class="comment">//创建 复制 插件，绑定单机时间到 指定元素，支持JQuery</span></span><br><span class="line">    <span class="keyword">var</span> clipboard = <span class="keyword">new</span> Clipboard(<span class="string">'#copyBtn'</span>, &#123;</span><br><span class="line">      target: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//返回需要复制的元素内容</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">document</span>.querySelector(<span class="string">"[copyFlag]"</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      isSupported: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//支持复制内容</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">document</span>.querySelector(<span class="string">"[copyFlag]"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//复制成功事件绑定</span></span><br><span class="line">    clipboard.on(<span class="string">'success'</span>,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//清除内容被选择状态</span></span><br><span class="line">        e.clearSelection();</span><br><span class="line">        changeToSuccess(e);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="comment">//复制失败绑定事件</span></span><br><span class="line">    clipboard.on(<span class="string">'error'</span>,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">'Action:'</span>, e.action);</span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">'Trigger:'</span>, e.trigger);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="comment">//鼠标 在复制按钮上滑动和离开后渐变显示/隐藏效果</span></span><br><span class="line">    $(<span class="string">"#copyBtn"</span>).hover(</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="keyword">this</span>).stop();</span><br><span class="line">        $(<span class="keyword">this</span>).css(<span class="string">"opacity"</span>, <span class="number">1</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="keyword">this</span>).animate(&#123;</span><br><span class="line">          opacity: <span class="number">0</span></span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//感应鼠标是否在代码区</span></span><br><span class="line">$(<span class="string">"figure"</span>).hover(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//-------鼠标活动在代码块内</span></span><br><span class="line">    <span class="comment">//移除之前含有复制标志代码块的 copyFlag</span></span><br><span class="line">    $(<span class="string">"[copyFlag]"</span>).removeAttr(<span class="string">"copyFlag"</span>);</span><br><span class="line">    <span class="comment">//在新的（当前鼠标所在代码区）代码块插入标志：copyFlag</span></span><br><span class="line">    $(<span class="keyword">this</span>).find(<span class="string">".code"</span>).attr(<span class="string">"copyFlag"</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//获取复制按钮</span></span><br><span class="line">    $copyBtn = $(<span class="string">"#copyBtn"</span>);</span><br><span class="line">    <span class="keyword">if</span> ($copyBtn.lenght != <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//获取到按钮的前提下进行一下操作</span></span><br><span class="line">      <span class="comment">//停止按钮动画效果</span></span><br><span class="line">      <span class="comment">//设置为 显示状态</span></span><br><span class="line">      <span class="comment">//修改 复制按钮 位置到 当前代码块开始部位</span></span><br><span class="line">      <span class="comment">//设置代码块 左侧位置</span></span><br><span class="line">      $copyBtn.stop();</span><br><span class="line">      $copyBtn.css(<span class="string">"opacity"</span>, <span class="number">0.8</span>);</span><br><span class="line">      $copyBtn.css(<span class="string">"display"</span>, <span class="string">"block"</span>);</span><br><span class="line">      $copyBtn.css(<span class="string">"top"</span>, <span class="built_in">parseInt</span>($copyBtn.css(<span class="string">"top"</span>)) + $(<span class="keyword">this</span>).offset().top - $copyBtn.offset().top + <span class="number">3</span>);</span><br><span class="line">      $copyBtn.css(<span class="string">"left"</span>, -$copyBtn.width() - <span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//-------鼠标离开代码块</span></span><br><span class="line">    <span class="comment">//设置复制按钮可见度 2秒内到 0</span></span><br><span class="line">    $(<span class="string">"#copyBtn"</span>).animate(&#123;</span><br><span class="line">      opacity: <span class="number">0</span></span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"><span class="comment">//页面载入完成后，创建复制按钮</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  createCopyBtns();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="20-3-引入自定义文件"><a href="#20-3-引入自定义文件" class="headerlink" title="20.3. 引入自定义文件"></a>20.3. 引入自定义文件</span></h3><p><span class="f-fw">打开</span>　<code>\themes\next\layout\_custom\</code></p>
<p><span class="f-fw">新建</span>　<code>custom.swig</code></p>
<p><span class="f-fw">打开</span>　<code>\themes\next\layout\_layout.swig</code></p>
<p><span class="f-fw">在</span> <code>&lt;/body&gt;</code> <span class="f-fw">前添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include <span class="string">'_custom/custom.swig'</span> %&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="20-4-添加主题"><a href="#20-4-添加主题" class="headerlink" title="20.4. 添加主题"></a>20.4. 添加主题</h3><p><span class="f-fw">打开</span>　<code>\blog\source\_data\header.swig</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"/lib/zclip/clipboard.min.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script type="text/</span>javascript<span class="string">" src="</span>/js/src/custom.js<span class="string">"&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<br/>

<h2 id="21-文末结束标记"><a href="#21-文末结束标记" class="headerlink" title="21. 文末结束标记"></a><span class="section-number">21.</span> <span class="s-fc-hd">文末结束标记</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="http://www.wuxubj.cn/2016/08/Hexo-nexT-build-personal-blog/#5-3-文章末尾添加“本文结束”标记/">务虚笔记</a></span>
          </div>

<p><span class="f-fw">打开　</span><code>\themes\next\layout\_macro\</code></p>
<p><span class="f-fw">新建　</span><code>passage-end-tag.swig</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.passage_end_tag.enabled %&#125;</span><br><span class="line">&lt;div style=<span class="string">"text-align:center;color: #ccc;font-size:15px;"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line">-------------文章结束啦 ~\(≧▽≦)/~ 感谢您的阅读-------------&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;br/</span>&gt;</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\themes\next\layout\_macro\post.swig</code></p>
<p><span class="f-fw">查找　</span><code>wechat</code></p>
<p><img data-src="/images/posts/hexo-optimization/hexo-optimization3.webp" alt=""></p>
<p><span class="f-fw">于图中位置添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  &lt;div&gt;</span><br><span class="line">  &#123;% <span class="keyword">if</span> not is_index %&#125;</span><br><span class="line">  &#123;% include <span class="string">'passage-end-tag.swig'</span> %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\themes\next\_config.yml</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文章末尾添加“本文结束”标记</span></span><br><span class="line"><span class="attr">passage_end_tag:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<br/>

<h2 id="22-鼠标点击特效"><a href="#22-鼠标点击特效" class="headerlink" title="22. 鼠标点击特效"></a><span id="#21"><span class="section-number">22.</span> <span class="s-fc-hd">鼠标点击特效</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://chanshiyu.com/">蝉時雨</a></span>
          </div>

<p><span class="f-fw">打开　</span><code>\blog\source\_data\header.swig</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 点击特效 --&gt;</span><br><span class="line">&lt;canvas <span class="class"><span class="keyword">class</span></span>=<span class="string">"fireworks"</span> style=<span class="string">"position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"</span> &gt;&lt;<span class="regexp">/canvas&gt;</span></span><br><span class="line"><span class="regexp">&lt;script type="text/</span>javascript<span class="string">" src="</span><span class="comment">//cdn.bootcss.com/animejs/2.2.0/anime.min.js"&gt;&lt;/script&gt;</span></span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"/js/src/fireworks.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p><span class="f-fw">下载　</span><br><i class="fa fa-download"></i> <a href="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"><code>anime.min.js</code></a><br><i class="fa fa-download"></i> <a href="https://qianling.pw/js/custom/fireworks.js"><code>fireworks.js</code></a></p>
<p><span class="f-fw">放置</span>　<code>anime.min.js</code> <span class="f-fw">至 CDN</span></p>
<p><span class="f-fw">打开</span>　<code>\themes\next\source\js\custom\</code></p>
<p><span class="f-fw">放置</span>　<code>fireworks.js</code></p>
<br/>

<h2 id="23-侧边栏添加-APlayer"><a href="#23-侧边栏添加-APlayer" class="headerlink" title="23. 侧边栏添加 APlayer"></a><span class="section-number">23.</span> <span class="s-fc-hd">侧边栏添加 APlayer</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://chanshiyu.com/">蝉時雨</a></span>
          </div>

<p><img data-src="/images/posts/hexo-optimization/hexo-optimization4.webp" alt=""></p>
<p><span class="f-fw">下载　</span><i class="fa fa-download"></i> <a href="https://qianling.pw/js/custom/APlayer.min.js/"><code>APlayer.min.js</code></a></p>
<p><span class="f-fw">打开　</span><code>\themes\next\source\js\custom\</code></p>
<p><span class="f-fw">放置　</span><code>APlayer.min.js</code></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\sidebar.swig</code></p>
<p><span class="f-fw">添加　</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"aplayer"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"aplayer"</span>&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="/</span>js/src/custom/APlayer.min.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;script type="</span>text/javascript<span class="string">"&gt;</span></span><br><span class="line"><span class="string">var ap = new APlayer(&#123;</span></span><br><span class="line"><span class="string">  element: document.getElementById('aplayer'),         // Optional, player element</span></span><br><span class="line"><span class="string">  narrow: false,         // Optional, narrow style</span></span><br><span class="line"><span class="string">  autoplay: false,              // Optional, autoplay song(s), not supported by mobile browsers</span></span><br><span class="line"><span class="string">  showlrc: 0,     // Optional, show lrc, can be 0, 1, 2, see: ###With lrc</span></span><br><span class="line"><span class="string">  mutex: true,                 // Optional, pause other players when this player playing</span></span><br><span class="line"><span class="string">  theme: '#e6d0b2',          // Optional, theme color, default: #b7daff</span></span><br><span class="line"><span class="string">  mode: 'random',      // Optional, play mode, can be `random` `single` `circulation`(loop) `order`(no loop), default: `circulation`</span></span><br><span class="line"><span class="string">  preload: 'metadata',               // Optional, the way to load music, can be 'none' 'metadata' 'auto', default: 'auto'</span></span><br><span class="line"><span class="string">  listmaxheight: '513px',      // Optional, max height of play list</span></span><br><span class="line"><span class="string">  music: [&#123;</span></span><br><span class="line"><span class="string">    title: '双笙 囧菌 - 世末歌者',</span></span><br><span class="line"><span class="string">    author: '双笙 囧菌',</span></span><br><span class="line"><span class="string">    url: 'https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/music/%E5%8F%8C%E7%AC%99%20%E5%9B%A7%E8%8F%8C%20-%20%E4%B8%96%E6%9C%AB%E6%AD%8C%E8%80%85.mp3',</span></span><br><span class="line"><span class="string">    pic: 'https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/music/%E5%8F%8C%E7%AC%99%20%E5%9B%A7%E8%8F%8C%20-%20%E4%B8%96%E6%9C%AB%E6%AD%8C%E8%80%85.webp',</span></span><br><span class="line"><span class="string">  &#125;, &#123;</span></span><br><span class="line"><span class="string">    title: '幹物女(WeiWei)',</span></span><br><span class="line"><span class="string">    author: '封茗囧菌',</span></span><br><span class="line"><span class="string">    url: 'https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/music/%E5%B0%81%E8%8C%97%E5%9B%A7%E8%8F%8C%20-%20%E5%B9%B9%E7%89%A9%E5%A5%B3(WeiWei).mp3',</span></span><br><span class="line"><span class="string">    pic: 'https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/music/%E5%B0%81%E8%8C%97%E5%9B%A7%E8%8F%8C%20-%20%E5%B9%B9%E7%89%A9%E5%A5%B3(WeiWei).webp',</span></span><br><span class="line"><span class="string">  &#125;]</span></span><br><span class="line"><span class="string">  &#125;);</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<br/>

<h2 id="24-页面添加-live2d"><a href="#24-页面添加-live2d" class="headerlink" title="24. 页面添加 live2d"></a><span class="section-number">24.</span> <span class="s-fc-hd">页面添加 live2d</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://huaji8.top/post/live2d-plugin-2.0">幻想帖</a></span>
          </div>

<p><span class="f-fw">安装　</span><code>npm install -save hexo-helper-live2d</code></p>
<p><span class="f-fw">打开</span>　<code>\blog\source\_data\header.swig</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; live2d() &#125;&#125;</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\blog\_config.yml</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">model:</span> <span class="string">koharu</span></span><br><span class="line">  <span class="attr">width:</span> <span class="number">150</span></span><br><span class="line">  <span class="attr">height:</span> <span class="number">300</span></span><br><span class="line">  <span class="attr">scaling:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">mobileShow:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobileScaling:</span> <span class="number">0.5</span></span><br><span class="line">  <span class="attr">opacityDefault:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">  <span class="attr">horizontalOffset:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">verticalOffset:</span> <span class="number">-40</span></span><br><span class="line">  <span class="attr">className:</span> <span class="string">live2d</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">live2dcanvas</span></span><br></pre></td></tr></table></figure>

<br/>

<h2 id="25-添加-Mob-分享"><a href="#25-添加-Mob-分享" class="headerlink" title="25. 添加 Mob 分享"></a><span class="section-number">25.</span> <span class="s-fc-hd">添加 Mob 分享</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://github.com/iissnan/hexo-theme-next/issues/911/">Issue #911</a></span>
          </div>
<p><span class="f-fw">登录 MOB（如无帐号请注册）　</span><a href="http://mob.com/login/">http://mob.com/login/</a></p>
<p><span class="f-fw">添加新的应用，然后在添加产品处添加 ShareSDK　</span></p>
<p><img data-src="/images/posts/hexo-optimization/hexo-optimization5.webp" alt=""></p>
<p><span class="f-fw">打开设置，复制AppKey</span></p>
<p><span class="f-fw">打开　</span><code>\blog\_config.yml</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Share</span></span><br><span class="line"><span class="attr">mob_share:</span></span><br><span class="line">  <span class="attr">appkey:</span> <span class="string">******</span></span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\themes\next\layout\_partials\share\</code></p>
<p><span class="f-fw">新建　</span><code>mob_share.swig</code></p>
<p><span class="f-fw">添加　</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--MOB SHARE BEGIN--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"-mob-share-ui-button -mob-share-open"</span>&gt;</span>分 享<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"-mob-share-ui"</span>  <span class="attr">-mob-share-ui-theme</span> <span class="attr">-mob-share-ui-theme-slide-bottom</span> <span class="attr">style</span>=<span class="string">"display: none"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"-mob-share-list"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-weixin"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>微信<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-qzone"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>QQ空间<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-weibo"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>新浪微博<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-facebook"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Facebook<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-twitter"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Twitter<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-pocket"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Pocket<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-tumblr"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Tumblr<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-google"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Google+<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-linkedin"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Linkedin<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-qq"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>QQ好友<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-tencentweibo"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>腾讯微博<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-renren"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>人人网<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-douban"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>豆瓣<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-youdao"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>有道云笔记<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"-mob-share-instapaper"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>Instapaper<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"-mob-share-close"</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"-mob-share-ui-bg"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">"-mob-share"</span> <span class="attr">src</span>=<span class="string">"https://f1.webshare.mob.com/code/mob-share.js?appkey=&#123;&#123;config.mob_share.appkey&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--MOB SHARE END--&gt;</span></span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\themes\next\layout\_macro\post.swig</code></p>
<p><span class="f-fw">查找　</span><code>&lt;i class=&quot;fa fa-chevron-right&quot;&gt;</code></p>
<p><img data-src="/images/posts/hexo-optimization/hexo-optimization6.webp" alt=""></p>
<p><span class="f-fw">于图中位置添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include <span class="string">'../_partials/share/mob_share.swig'</span> %&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="26-文章置顶"><a href="#26-文章置顶" class="headerlink" title="26. 文章置顶"></a><span class="section-number">26.</span> <span class="s-fc-hd">文章置顶</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="http://shenzekun.cn/hexo%E7%9A%84next%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B.html#26-博文置顶/">Moorez</a></span>
          </div>

<p><strong>Bug：与按文章更新时间排序冲突</strong></p>
<h3 id="26-1-修改-generator-js"><a href="#26-1-修改-generator-js" class="headerlink" title="26.1. 修改 generator.js"></a>26.1. 修改 generator.js</h3><p><span class="f-fw">打开　</span><code>\blog\node_modules\hexo-generator-index\lib\generator.js</code></p>
<p><span class="f-fw">将内容修改为　</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">var</span> pagination = <span class="built_in">require</span>(<span class="string">'hexo-pagination'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">locals</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> config = <span class="keyword">this</span>.config;</span><br><span class="line">  <span class="keyword">var</span> posts = locals.posts;</span><br><span class="line">  posts.data = posts.data.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.sticky &amp;&amp; b.sticky) &#123; <span class="comment">// 两篇文章sticky都有定义</span></span><br><span class="line">      <span class="keyword">if</span>(a.sticky == b.sticky) <span class="keyword">return</span> b.date - a.date; <span class="comment">// 若sticky值一样则按照文章日期降序排</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">return</span> b.sticky - a.sticky; <span class="comment">// 否则按照sticky值降序排</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a.sticky &amp;&amp; !b.sticky) &#123; <span class="comment">// 以下是只有一篇文章sticky有定义，那么将有sticky的排在前面（这里用异或操作居然不行233）</span></span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(!a.sticky &amp;&amp; b.sticky) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> b.date - a.date; <span class="comment">// 都没定义按照文章日期降序排</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">var</span> paginationDir = config.pagination_dir || <span class="string">'page'</span>;</span><br><span class="line">  <span class="keyword">return</span> pagination(<span class="string">''</span>, posts, &#123;</span><br><span class="line">  perPage: config.index_generator.per_page,</span><br><span class="line">  layout: [<span class="string">'index'</span>, <span class="string">'archive'</span>],</span><br><span class="line">  format: paginationDir + <span class="string">'/%d/'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    __index: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">使用方法</span></p>
<p>在文章中添加 sticky 值，数值越大文章越靠前，如</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hexo 优化汇总</span><br><span class="line">categories:</span><br><span class="line"><span class="bullet">  - </span>Hexo</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">  - </span>前端</span><br><span class="line"><span class="bullet">  - </span>Hexo</span><br><span class="line">sticky: 1</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="26-2-图标美化"><a href="#26-2-图标美化" class="headerlink" title="26.2. 图标美化"></a>26.2. 图标美化</h3><p><span class="f-fw">打开　</span><code>\themes\next\layout\_macro\post.swig</code></p>
<p><span class="f-fw">查找（两条）　</span><code>&lt;i class=&quot;fa fa-thumb-tack&quot;&gt;&lt;/i&gt;</code></p>
<p><span class="f-fw">修改为想要的图形（以图片为例）　</span><code>&lt;img src=&quot;/images/sticky.png&quot; width=&quot;60&quot; height=&quot;60&quot; /&gt;</code></p>
<p><span class="f-fw">如果是图片，可能需要修改 CSS，以下为参考</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 文章置顶标签样式</span><br><span class="line"><span class="selector-class">.post-sticky-flag</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">32px</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">+mobile() &#123;</span><br><span class="line">  <span class="selector-tag">bottom</span>: 38<span class="selector-tag">px</span>;</span><br><span class="line">  <span class="selector-tag">right</span>: <span class="selector-tag">-25px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.post-sticky-flag</span> &#123;</span><br><span class="line">  <span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="27-Local-Search-加载动画修改"><a href="#27-Local-Search-加载动画修改" class="headerlink" title="27. Local Search 加载动画修改"></a><span class="section-number">27.</span> <span class="s-fc-hd">Local Search 加载动画修改</span></h2><p><strong>已有预加载功能，不必修改</strong></p>
<p><span class="f-fw">打开　</span><code>\themes\next\source\js\local-search.js</code></p>
<p><span class="f-fw">查找　</span><code>fa fa-spinner fa-pulse fa-5x fa-fw</code></p>
<p><span class="f-fw">改为　</span><code>fa fa-circle-o-notch fa-spin fa-5x fa-fw margin-bottom</code></p>
<br/>

<h2 id="28-Star-rating-修改"><a href="#28-Star-rating-修改" class="headerlink" title="28. Star rating 修改"></a><span class="section-number">28.</span> <span class="s-fc-hd">Star rating 修改</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html#文章底部加上评分小星星/">reuixiy</a></span>
          </div>

<p><span class="f-fw">打开　</span><code>\themes\next\layout\_partials\post\post-footer.swig</code></p>
<p><span class="f-fw">查找　</span><code>&lt;div class=&quot;wp_rating&quot;&gt;</code></p>
<p><span class="f-fw">在下一行添加</span><br><code>&lt;div style=&quot;color: rgba(0, 0, 0, 0.75); font-size:13px; letter-spacing:3px&quot;&gt;(&amp;gt;来评分吧&amp;lt;)&lt;/div&gt;</code></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 评分留白更改</span><br><span class="line"><span class="selector-class">.post-widgets</span> &#123;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.post-nav</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="29-点击侧栏以外区域时关闭侧栏"><a href="#29-点击侧栏以外区域时关闭侧栏" class="headerlink" title="29. 点击侧栏以外区域时关闭侧栏"></a><span class="section-number">29.</span> <span class="s-fc-hd">点击侧栏以外区域时关闭侧栏</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://github.com/iissnan/hexo-theme-next/issues/947">Issue #947</a></span>
          </div>

<p><strong>Next 主题 7.0+ 已失效</strong></p>
<p><span class="f-fw">打开　</span><code>\themes\next\source\js\motion.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 点击侧栏以外区域时关闭侧栏</span></span><br><span class="line">$(<span class="string">'body'</span>).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> bSidebarShow = $(<span class="string">'#sidebar'</span>).css(<span class="string">'display'</span>)===<span class="string">'block'</span> &amp;&amp; $(<span class="string">'#sidebar'</span>).width() &gt; <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> bFlag = $(e.target).parents(<span class="string">'#sidebar,.sidebar-toggle'</span>).length &gt; <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span>(bSidebarShow &amp;&amp; !bFlag)&#123;</span><br><span class="line">    $(<span class="string">'.sidebar-toggle-line-wrap'</span>).trigger(<span class="string">'click'</span>);</span><br><span class="line">    e.preventDefault();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="30-阅读进度条"><a href="#30-阅读进度条" class="headerlink" title="30. 阅读进度条"></a><span class="section-number">30.</span> <span class="s-fc-hd">阅读进度条</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://isudox.com/2016/07/14/customize-hexo-theme/">I sudo X</a></span>
          </div>

<p><strong>比自带的更好看。</strong></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\header.swig</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top-scroll-bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//顶部阅读进度条</span><br><span class="line"><span class="selector-class">.top-scroll-bar</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition-duration</span>: <span class="number">0.7s</span>,<span class="number">0.7s</span>;</span><br><span class="line">  <span class="attribute">transiton-property</span>: width,background;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">99999</span>;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#37C6C0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">打开　</span><code>\themes\next\source\js\custom\custom.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//阅读进度条</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">".top-scroll-bar"</span>).attr(<span class="string">"style"</span>, <span class="string">"width: "</span> + ($(<span class="keyword">this</span>).scrollTop() / ($(<span class="built_in">document</span>).height() - $(<span class="keyword">this</span>).height()) * <span class="number">100</span>) + <span class="string">"%; display: block;"</span>);</span><br><span class="line">  <span class="keyword">var</span> s=$(<span class="built_in">window</span>).scrollTop();</span><br><span class="line">  <span class="keyword">var</span> a=$(<span class="built_in">document</span>).height();</span><br><span class="line">  <span class="keyword">var</span> b=$(<span class="built_in">window</span>).height();</span><br><span class="line">  <span class="keyword">var</span> result=<span class="built_in">parseInt</span>(s/(a-b)*<span class="number">100</span>);</span><br><span class="line">  $(<span class="string">".top-scroll-bar"</span>).css(<span class="string">"width"</span>,result+<span class="string">"%"</span>);</span><br><span class="line">  <span class="keyword">if</span>(result&gt;=<span class="number">0</span>&amp;&amp;result&lt;=<span class="number">19</span>)</span><br><span class="line">  $(<span class="string">".top-scroll-bar"</span>).css(<span class="string">"background"</span>,<span class="string">"#cccccc"</span>);</span><br><span class="line">  <span class="keyword">if</span>(result&gt;=<span class="number">20</span>&amp;&amp;result&lt;=<span class="number">39</span>)</span><br><span class="line">  $(<span class="string">".top-scroll-bar"</span>).css(<span class="string">"background"</span>,<span class="string">"#50bcb6"</span>);</span><br><span class="line">  <span class="keyword">if</span>(result&gt;=<span class="number">40</span>&amp;&amp;result&lt;=<span class="number">59</span>)</span><br><span class="line">  $(<span class="string">".top-scroll-bar"</span>).css(<span class="string">"background"</span>,<span class="string">"#85c440"</span>);</span><br><span class="line">  <span class="keyword">if</span>(result&gt;=<span class="number">60</span>&amp;&amp;result&lt;=<span class="number">79</span>)</span><br><span class="line">  $(<span class="string">".top-scroll-bar"</span>).css(<span class="string">"background"</span>,<span class="string">"#f2b63c"</span>);</span><br><span class="line">  <span class="keyword">if</span>(result&gt;=<span class="number">80</span>&amp;&amp;result&lt;=<span class="number">99</span>)</span><br><span class="line">  $(<span class="string">".top-scroll-bar"</span>).css(<span class="string">"background"</span>,<span class="string">"#FF0000"</span>);</span><br><span class="line">  <span class="keyword">if</span>(result==<span class="number">100</span>)</span><br><span class="line">  $(<span class="string">".top-scroll-bar"</span>).css(<span class="string">"background"</span>,<span class="string">"#f58ca1"</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="31-评论输入打字礼花及震动特效"><a href="#31-评论输入打字礼花及震动特效" class="headerlink" title="31. 评论输入打字礼花及震动特效"></a><span class="section-number">31.</span> <span class="s-fc-hd">评论输入打字礼花及震动特效</span></h2><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://www.ilxtx.com/comment-input-effects.html/">龙笑天下</a></span>
          </div>

<p><span class="f-fw">下载　</span><i class="fa fa-download"></i> <a href="https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/js/activate-power-mode.js"><code>activate-power-mode.js</code></a></p>
<p><span class="f-fw">放置</span>　<code>activate-power-mode.js</code> <span class="f-fw">至 CDN</span></p>
<p><span class="f-fw">打开　</span><code>\blog\source\_data\header.swig</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 打字礼花及震动特效 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/js/activate-power-mode.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  POWERMODE.colorful = <span class="literal">true</span>; <span class="comment">// ture 为启用礼花特效</span></span></span><br><span class="line"><span class="actionscript">  POWERMODE.shake = <span class="literal">false</span>; <span class="comment">// false 为禁用震动特效</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.body.addEventListener(<span class="string">'input'</span>, POWERMODE);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<br/>

<h2 id="32-Valine-邮件提醒"><a href="#32-Valine-邮件提醒" class="headerlink" title="32. Valine 邮件提醒"></a><span class="section-number">32.</span> <span class="s-fc-hd">Valine 邮件提醒</span></h2><div class="note info">
            <span class="f-fw">教程　<a class="s-fc-a" href="http://www.zhaojun.im/hexo-valine-admin/">Hexo 优化 --- Valine 扩展之邮件通知</a></span>
          </div>

<div class="f-fw">
使用 LeanCloud 存储你的评论数据，在 LeanEngine 云引擎上管理你的评论，包括邮件通知和垃圾评论标记。

<p>这是用于 Valine 评论 的后台管理，可以部署到你的 LeanCloud。它可以帮你完成：</p>
</div>

<ul>
<li><span class="f-fw">完善的邮件通知</span><ul>
<li><span class="f-fw">收到评论后, 通知站长</span></li>
<li><span class="f-fw">游客被 @ 通知</span></li>
</ul>
</li>
<li><span class="f-fw">邮件模板定制</span></li>
<li><span class="f-fw">评论管理</span></li>
</ul>
<p>注意：修改 <strong>QQ 密码</strong>后，<strong>SMTP 密码</strong>会变动，需要重新获取授权码并修改 <strong>SMTP_PASS</strong> 参数后才能继续使用邮件提醒功能。</p>
<p>重启容器不影响定时器。</p>
<br/>

<h2 id="33-Valine-匿名修改"><a href="#33-Valine-匿名修改" class="headerlink" title="33. Valine 匿名修改"></a><span class="section-number">33.</span> <span class="s-fc-hd">Valine 匿名修改</span></h2><p>Valine 不填写昵称默认显示为 Anonymous，将其修改为中文匿名。</p>
<p><span class="f-fw">下载并打开　</span><code>Valine.min.js</code></p>
<p><span class="f-fw">查找　</span><code>nick:&quot;Anonymous&quot;</code>　<code>v.nick=v.nick||&quot;Anonymous&quot;</code>　<code>&quot;Anonymous&quot;!=v.nick</code></p>
<p><span class="f-fw">将三处</span> <code>Anonymous</code> <span class="f-fw">改为</span> <code>匿名</code></p>
<br/>

<h2 id="34-折叠功能"><a href="#34-折叠功能" class="headerlink" title="34. 折叠功能"></a><span class="section-number">34.</span> <span class="s-fc-hd">折叠功能</span></h2><div class="note info">
            <span class="f-fw">本节转载自　<a class="s-fc-a" href="https://blog.rmiao.top/hexo-fold-block/">Hexo next博客添加折叠块功能添加折叠代码块</a></span>
          </div>

<p>有大段的东西想要放上去，但又不想占据大量的位置。折叠是最好的选择。</p>
<div><div class="fold_hider"><div class="close hider_title">示范&nbsp·&nbsp点击以显示／隐藏内容</div></div><div class="fold">
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% fold 这里是按钮文本 %&#125;</span><br><span class="line">这里是折叠内容，类型不限。</span><br><span class="line">&#123;% endfold %&#125;</span><br></pre></td></tr></table></figure>
</div></div>

<p><span class="f-fw">打开　</span><code>\themes\next\source\js\custom\custom.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 折叠</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="built_in">document</span>).on(<span class="string">'click'</span>, <span class="string">'.fold_hider'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    $(<span class="string">'&gt;.fold'</span>, <span class="keyword">this</span>.parentNode).slideToggle();</span><br><span class="line">    $(<span class="string">'&gt;:first'</span>, <span class="keyword">this</span>).toggleClass(<span class="string">'open'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//默认情况下折叠</span></span><br><span class="line">  $(<span class="string">"div.fold"</span>).css(<span class="string">"display"</span>,<span class="string">"none"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\themes\next\scripts</code></p>
<p><span class="f-fw">新建　</span><code>tags.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rEscapeContent = <span class="regexp">/&lt;escape(?:[^&gt;]*)&gt;([\s\S]*?)&lt;\/escape&gt;/g</span>;</span><br><span class="line"><span class="keyword">const</span> placeholder = <span class="string">'\uFFFD'</span>;</span><br><span class="line"><span class="keyword">const</span> rPlaceholder = <span class="regexp">/(?:&lt;|&amp;lt;)\!--\uFFFD(\d+)--(?:&gt;|&amp;gt;)/g</span>;</span><br><span class="line"><span class="keyword">const</span> cache = [];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">escapeContent</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'&lt;!--'</span> + placeholder + (cache.push(str) - <span class="number">1</span>) + <span class="string">'--&gt;'</span>;</span><br><span class="line">&#125;</span><br><span class="line">hexo.extend.filter.register(<span class="string">'before_post_render'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  data.content = data.content.replace(rEscapeContent, <span class="function"><span class="keyword">function</span>(<span class="params">match, content</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> escapeContent(content);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;);</span><br><span class="line">hexo.extend.filter.register(<span class="string">'after_post_render'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  data.content = data.content.replace(rPlaceholder, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> cache[<span class="built_in">arguments</span>[<span class="number">1</span>]];</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">新建　</span><code>fold.js</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* global hexo */</span></span><br><span class="line"><span class="comment">// Usage: &#123;% fold ???? %&#125; Something &#123;% endfold %&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fold</span> (<span class="params">args, content</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> text = args[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">if</span>(!text) text = <span class="string">"点击显示／隐藏内容"</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'&lt;div&gt;&lt;div class="fold_hider"&gt;&lt;div class="close hider_title"&gt;'</span> + text + <span class="string">'&lt;/div&gt;&lt;/div&gt;&lt;div class="fold"&gt;\n'</span> + hexo.render.renderSync(&#123;<span class="attr">text</span>: content, <span class="attr">engine</span>: <span class="string">'markdown'</span>&#125;) + <span class="string">'\n&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">&#125;</span><br><span class="line">hexo.extend.tag.register(<span class="string">'fold'</span>, fold, &#123;<span class="attr">ends</span>: <span class="literal">true</span>&#125;);</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">打开　</span><code>\blog\source\_data\styles.styl</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 折叠</span><br><span class="line"><span class="selector-class">.hider_title</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ef4a05</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.close</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">" ▼"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.open</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">" ▲"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="35-修改返回顶部按钮图标"><a href="#35-修改返回顶部按钮图标" class="headerlink" title="35. 修改返回顶部按钮图标"></a><span class="section-number">35.</span> <span class="s-fc-hd">修改返回顶部按钮图标</span></h2><p><span class="f-fw">打开　</span><code>\themes\next\layout\_partials\widgets.swig</code></p>
<p><span class="f-fw">查找　</span><code>fa fa-arrow-up</code></p>
<p><span class="f-fw">改为　</span> <code>fa fa-chevron-up</code></p>
<br/>

<h2 id="36-文章按更新时间排序"><a href="#36-文章按更新时间排序" class="headerlink" title="36. 文章按更新时间排序"></a><span class="section-number">36.</span> <span class="s-fc-hd">文章按更新时间排序</span></h2><div class="note info">
            <span class="f-fw">本节转载自　<a class="s-fc-a" href="http://aiellochan.com/2018/02/13/hexo/Hexo-%E6%96%87%E7%AB%A0%E6%8C%89%E7%85%A7%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4%E6%8E%92%E5%BA%8F/">Hexo 文章按照更新时间排序</a></span>
          </div>

<p><span class="f-fw">打开　</span><code>\blog\_config.yml</code></p>
<p><span class="f-fw">查找　</span><code>order_by: -date</code></p>
<p><span class="f-fw">将　</span> <code>-date</code></p>
<p><span class="f-fw">改为　</span> <code>-updated</code></p>
<br/>

<h2 id="37-post-meta-item-修改"><a href="#37-post-meta-item-修改" class="headerlink" title="37. post-meta-item 修改"></a><span class="section-number">37.</span> <span class="s-fc-hd">post-meta-item 修改</span></h2><h3 id="37-1-评论数增加超链接"><a href="#37-1-评论数增加超链接" class="headerlink" title="37.1. 评论数增加超链接"></a>37.1. 评论数增加超链接</h3><p><img data-src="/images/posts/hexo-optimization/hexo-optimization7.png" alt=""></p>
<p><strong>以 Valine 为例</strong></p>
<p><span class="f-fw">打开　</span><code>\themes\next\layout\_macro\post.swig</code></p>
<p><span class="f-fw">查找</span></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class="post-meta-item-text"&gt;&#123;&#123; __('post.comments_count') + __('symbol.colon') &#125;&#125;&lt;/span&gt;</span><br></pre></td></tr></table></figure>
<p><img data-src="/images/posts/hexo-optimization/hexo-optimization8.png" alt=""><br><span class="f-fw">将其移动至</span></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href="&#123;&#123; url_for(post.path) &#125;&#125;#comments" itemprop="discussionUrl"&gt;</span><br></pre></td></tr></table></figure>
<p><span class="f-fw">后</span><br><img data-src="/images/posts/hexo-optimization/hexo-optimization9.png" alt=""></p>
<br/>

<h3 id="37-2-Valine-汉化"><a href="#37-2-Valine-汉化" class="headerlink" title="37.2. Valine 汉化"></a>37.2. Valine 汉化</h3><p><strong>Next 7.7.1 把原来的‘评论数’去掉了，现在只显示‘Valine’</strong></p>
<p><span class="f-fw">打开　</span>　<code>\themes\next\scripts\filters\comment\valine.js</code></p>
<p><span class="f-fw">查找　</span>　<code>${iconText(&#39;comment-o&#39;, &#39;valine&#39;)}</code></p>
<p><span class="f-fw">改为　</span> <code>&lt;i class=&quot;far fa-comment&quot;&gt;&lt;/i&gt;评论数</code></p>
<p><span class="f-fw">若要为评论数增加超链接，则移动至 a 标签后面，修改后完整代码：</span> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"post-meta-item"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"far fa-comment"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">title</span>=<span class="string">"valine"</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; url_for(post.path) &#125;&#125;#valine-comments"</span> <span class="attr">itemprop</span>=<span class="string">"discussionUrl"</span>&gt;</span></span><br><span class="line">     评论数</span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"post-comments-count valine-comment-count"</span> <span class="attr">data-xid</span>=<span class="string">"&#123;&#123; url_for(post.path) &#125;&#125;"</span> <span class="attr">itemprop</span>=<span class="string">"commentCount"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<br/>

<h3 id="37-3-去除冒号"><a href="#37-3-去除冒号" class="headerlink" title="37.3. 去除冒号"></a>37.3. 去除冒号</h3><p><img data-src="/images/posts/hexo-optimization/hexo-optimization10.png" alt=""><br><strong>依个人审美决定是否修改</strong></p>
<p><span class="f-fw">打开　</span>　<code>\themes\next\languages\zh-CN.yml</code></p>
<p><span class="f-fw">查找　</span>　<code>colon</code></p>
<p><span class="f-fw">将　</span> <code>&quot;：&quot;</code></p>
<p><span class="f-fw">改为　</span> <code>&quot; &quot;</code></p>
<br/>

<h2 id="38-归档页英文标点修改"><a href="#38-归档页英文标点修改" class="headerlink" title="38. 归档页英文标点修改"></a><span class="section-number">38.</span> <span class="s-fc-hd">归档页英文标点修改</span></h2><h3 id="38-1-将英文感叹号修改为中文感叹号"><a href="#38-1-将英文感叹号修改为中文感叹号" class="headerlink" title="38.1. 将英文感叹号修改为中文感叹号"></a>38.1. 将英文感叹号修改为中文感叹号</h3><p><span class="f-fw">打开　</span><code>\themes\next\layout\archive.swig</code></p>
<p><span class="f-fw">查找</span></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; __('cheers.' + cheers) &#125;&#125;</span><br></pre></td></tr></table></figure>

<p><span class="f-fw">将　</span> <code>!</code></p>
<p><span class="f-fw">改为　</span> <code>！</code></p>
<br/>

<h3 id="38-2-文本修改"><a href="#38-2-文本修改" class="headerlink" title="38.2. 文本修改"></a>38.2. 文本修改</h3><p><span class="f-fw">打开　</span><code>\themes\next\languages\zh-CN.yml</code></p>
<p><span class="f-fw">找到对应文本自行修改即可</span></p>
<br/>

<h2 id="39-图片懒加载"><a href="#39-图片懒加载" class="headerlink" title="39. 图片懒加载"></a><span class="section-number">39.</span> <span class="s-fc-hd">图片懒加载</span></h2><h3 id="39-1-Next-主题自带插件"><a href="#39-1-Next-主题自带插件" class="headerlink" title="39.1. Next 主题自带插件"></a>39.1. Next 主题自带插件</h3><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://github.com/theme-next/theme-next-jquery-lazyload">theme-next-jquery-lazyload</a></span>
          </div>

<p><span class="f-fw">打开　</span><code>\themes\next\_config.yml</code></p>
<p><span class="f-fw">查找　</span><code>lazyload: false</code></p>
<p><span class="f-fw">将　</span> <code>false</code></p>
<p><span class="f-fw">改为　</span> <code>true</code></p>
<br/>

<h3 id="39-2-Hexo-插件-①"><a href="#39-2-Hexo-插件-①" class="headerlink" title="39.2. Hexo 插件 ①"></a>39.2. Hexo 插件 ①</h3><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://troyyang.com/2017/08/06/hexo-lazyload-image/">Troy's 博客</a></span>
          </div>

<p><span class="f-fw">安装　</span><code>npm install hexo-lazyload-image --save</code></p>
<p><span class="f-fw">打开　</span><code>\blog\_config.yml</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># LazyLoad</span></span><br><span class="line"><span class="attr">lazyload:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">onlypost:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">loadingImg:</span> <span class="string">/images/loading.gif</span></span><br></pre></td></tr></table></figure>

<p><strong>onlypost</strong> - 是否仅文章中的图片做懒加载, 如果为 false， 则主题中的其他图片，也会做懒加载，如头像、logo 等任何图片</p>
<p><strong>loadingImg</strong> - 图片未加载时的代替图</p>
<p><span class="f-fw">使用格式　</span> </p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">Alt text</span>](<span class="link">imageurl</span>)</span><br></pre></td></tr></table></figure>

<h3 id="39-3-Hexo-插件-②"><a href="#39-3-Hexo-插件-②" class="headerlink" title="39.3. Hexo 插件 ②"></a>39.3. Hexo 插件 ②</h3><div class="note info">
            <span class="f-fw">本节参考自　<a class="s-fc-a" href="https://github.com/Robin-front/hexo-lazyload">Robin-front</a></span>
          </div>

<p><span class="f-fw">安装　</span><code>npm install hexo-lazyload --save</code></p>
<p><span class="f-fw">打开　</span><code>\blog\_config.yml</code></p>
<p><span class="f-fw">添加</span></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lazyload:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># thumbPath: '/images/thumb'</span></span><br><span class="line">  <span class="comment"># className: #optional e.g. .J-lazyload-img</span></span><br><span class="line">  <span class="comment"># loadingImg: #optional eg. /images/loading.png</span></span><br></pre></td></tr></table></figure>

    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\base64-fonts\" rel="bookmark">内联引入 base64 字体</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\service-worker\" rel="bookmark">Hexo 部署 Service Worker</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\changyan\" rel="bookmark">免备案使用畅言</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\custom-web-page\" rel="bookmark">Hexo 跳过渲染，创建自定义网页</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\error-launching-git\" rel="bookmark">关于 'error launching git' 的解决方法</a></div>
    </li>
  </ul>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Hexo/" rel="tag"># Hexo</a>
              <a href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag"># 前端</a>
          </div>

        
  <div class="post-widgets">
    <div class="wp_rating">
      <div id="wpac-rating"></div>
    </div>
  </div>


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/html-pv/" rel="prev" title="通过 HTML 刷浏览量（PV）">
      <i class="fa fa-chevron-left"></i> 通过 HTML 刷浏览量（PV）
    </a></div>
      <div class="post-nav-item">
    <a href="/style/" rel="next" title="样式汇总">
      样式汇总 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-设定自定义文件"><span class="nav-text">1. 设定自定义文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-CNPM"><span class="nav-text">2. CNPM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Hexo-页面自动刷新"><span class="nav-text">3. Hexo 页面自动刷新</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-InstantClick"><span class="nav-text">4. InstantClick</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-压缩"><span class="nav-text">5. 压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-Gulp"><span class="nav-text">5.1. Gulp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-hexo-neat"><span class="nav-text">5.2. hexo-neat</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Service-Worker"><span class="nav-text">6. Service Worker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-批处理脚本自动创建文章及一键部署"><span class="nav-text">7. 批处理脚本自动创建文章及一键部署</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-根据邮箱自定义评论头像"><span class="nav-text">8. 根据邮箱自定义评论头像</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-修改分类层级显示"><span class="nav-text">9. 修改分类层级显示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-1-修改-post-swig"><span class="nav-text">9.1. 修改 post.swig</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2-修改-custom-styl"><span class="nav-text">9.2. 修改 custom.styl</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-添加标题底部横线"><span class="nav-text">10. 添加标题底部横线</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-修改页脚文字"><span class="nav-text">11. 修改页脚文字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-设置背景图片"><span class="nav-text">12. 设置背景图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-去除-more-标签"><span class="nav-text">13. 去除 #more 标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-记忆浏览位置"><span class="nav-text">14. 记忆浏览位置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-修改页宽"><span class="nav-text">15. 修改页宽</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-分类和标签界面显示年份"><span class="nav-text">16. 分类和标签界面显示年份</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-1-修改-category-swig"><span class="nav-text">16.1. 修改 category.swig</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-2-修改-tag-swig"><span class="nav-text">16.2. 修改 tag.swig</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-滚动条美化"><span class="nav-text">17. 滚动条美化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18-畅言加载优化"><span class="nav-text">18. 畅言加载优化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#19-畅言去版权"><span class="nav-text">19. 畅言去版权</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-代码块复制功能"><span class="nav-text">20. 代码块复制功能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#20-1-下载-clipboard-js"><span class="nav-text">20.1. 下载 clipboard.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-2-插入-JavaScript"><span class="nav-text">20.2. 插入 JavaScript</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-3-引入自定义文件"><span class="nav-text">20.3. 引入自定义文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-4-添加主题"><span class="nav-text">20.4. 添加主题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-文末结束标记"><span class="nav-text">21. 文末结束标记</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-鼠标点击特效"><span class="nav-text">22. 鼠标点击特效</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-侧边栏添加-APlayer"><span class="nav-text">23. 侧边栏添加 APlayer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#24-页面添加-live2d"><span class="nav-text">24. 页面添加 live2d</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-添加-Mob-分享"><span class="nav-text">25. 添加 Mob 分享</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#26-文章置顶"><span class="nav-text">26. 文章置顶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#26-1-修改-generator-js"><span class="nav-text">26.1. 修改 generator.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#26-2-图标美化"><span class="nav-text">26.2. 图标美化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#27-Local-Search-加载动画修改"><span class="nav-text">27. Local Search 加载动画修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#28-Star-rating-修改"><span class="nav-text">28. Star rating 修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#29-点击侧栏以外区域时关闭侧栏"><span class="nav-text">29. 点击侧栏以外区域时关闭侧栏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#30-阅读进度条"><span class="nav-text">30. 阅读进度条</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#31-评论输入打字礼花及震动特效"><span class="nav-text">31. 评论输入打字礼花及震动特效</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#32-Valine-邮件提醒"><span class="nav-text">32. Valine 邮件提醒</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#33-Valine-匿名修改"><span class="nav-text">33. Valine 匿名修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#34-折叠功能"><span class="nav-text">34. 折叠功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#35-修改返回顶部按钮图标"><span class="nav-text">35. 修改返回顶部按钮图标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#36-文章按更新时间排序"><span class="nav-text">36. 文章按更新时间排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#37-post-meta-item-修改"><span class="nav-text">37. post-meta-item 修改</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#37-1-评论数增加超链接"><span class="nav-text">37.1. 评论数增加超链接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#37-2-Valine-汉化"><span class="nav-text">37.2. Valine 汉化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#37-3-去除冒号"><span class="nav-text">37.3. 去除冒号</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#38-归档页英文标点修改"><span class="nav-text">38. 归档页英文标点修改</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#38-1-将英文感叹号修改为中文感叹号"><span class="nav-text">38.1. 将英文感叹号修改为中文感叹号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#38-2-文本修改"><span class="nav-text">38.2. 文本修改</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#39-图片懒加载"><span class="nav-text">39. 图片懒加载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#39-1-Next-主题自带插件"><span class="nav-text">39.1. Next 主题自带插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#39-2-Hexo-插件-①"><span class="nav-text">39.2. Hexo 插件 ①</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#39-3-Hexo-插件-②"><span class="nav-text">39.3. Hexo 插件 ②</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="千灵夙赋"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">千灵夙赋</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">161</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">33</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-fw fa-rss"></i>RSS</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Friends
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://myloveru.cn/" title="http:&#x2F;&#x2F;myloveru.cn&#x2F;" rel="noopener" target="_blank">梦想博客</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://meow3.family.blog/" title="https:&#x2F;&#x2F;meow3.family.blog&#x2F;" rel="noopener" target="_blank">恶魔菌の记事簿</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://myoumeng.github.io/" title="https:&#x2F;&#x2F;myoumeng.github.io&#x2F;" rel="noopener" target="_blank">彼岸遇见欧萌</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://tding.top/" title="https:&#x2F;&#x2F;tding.top&#x2F;" rel="noopener" target="_blank">小丁的个人博客</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.julydate.com/" title="https:&#x2F;&#x2F;www.julydate.com&#x2F;" rel="noopener" target="_blank">七夏浅笑</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://raspii.tech/" title="https:&#x2F;&#x2F;raspii.tech&#x2F;" rel="noopener" target="_blank">无用挂件</a>
        </li>
    </ul>
  </div>
<div id="aplayer" class="aplayer"></div>
<script>
if( !/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)){
  document.write('<script type="text/javascript" src="/js/custom/APlayer.min.js"><\/script>');
}
</script>
<script type="text/javascript">
var ap = new APlayer({
    element: document.getElementById('aplayer'),                       // Optional, player element
    narrow: false,                                                     // Optional, narrow style
    autoplay: false,                                                    // Optional, autoplay song(s), not supported by mobile browsers
    showlrc: 0,                                                        // Optional, show lrc, can be 0, 1, 2, see: ###With lrc
    mutex: true,                                                       // Optional, pause other players when this player playing
    theme: '#e6d0b2',                                                  // Optional, theme color, default: #b7daff
    mode: 'random',                                                    // Optional, play mode, can be `random` `single` `circulation`(loop) `order`(no loop), default: `circulation`
    preload: 'metadata',                                               // Optional, the way to load music, can be 'none' 'metadata' 'auto', default: 'auto'
    listmaxheight: '513px',                                             // Optional, max height of play list
    music: [{
      title: '世末歌者',
      author: '双笙 囧菌',
      url: '/music/%E5%8F%8C%E7%AC%99%20%E5%9B%A7%E8%8F%8C%20-%20%E4%B8%96%E6%9C%AB%E6%AD%8C%E8%80%85.mp3',
      pic: '/images/aplayer/双笙　囧菌 - 世末歌者.webp',
    }, {
      title: '幹物女(WeiWei)',
      author: '封茗囧菌',
      url: '/music/%E5%B0%81%E8%8C%97%E5%9B%A7%E8%8F%8C%20-%20%E5%B9%B9%E7%89%A9%E5%A5%B3(WeiWei).mp3',
      pic: '/images/aplayer/封茗囧菌 - 幹物女(WeiWei).webp',
    }, {
      title: '东京不太热',
      author: '封茗囧菌',
      url: '/music/%E5%B0%81%E8%8C%97%E5%9B%A7%E8%8F%8C%20-%20%E4%B8%9C%E4%BA%AC%E4%B8%8D%E5%A4%AA%E7%83%AD.mp3',
      pic: '/images/aplayer/封茗囧菌 - 东京不太热.webp',
    }, {
      title: '有故事的小仙女（Cover 初音ミク）',
      author: '井宿',
      url: '/music/%E4%BA%95%E5%AE%BF%20-%20%E6%9C%89%E6%95%85%E4%BA%8B%E7%9A%84%E5%B0%8F%E4%BB%99%E5%A5%B3%EF%BC%88Cover%20%E5%88%9D%E9%9F%B3%E3%83%9F%E3%82%AF%EF%BC%89.mp3',
      pic: '/images/aplayer/井宿 - 有故事的小仙女（Cover 初音ミク）.webp',
    }, {
      title: '拼凑的断音（Cover 洛天依）',
      author: '泡泡Hansy',
      url: '/music/%E6%B3%A1%E6%B3%A1Hansy%20-%20%E6%8B%BC%E5%87%91%E7%9A%84%E6%96%AD%E9%9F%B3%EF%BC%88Cover%20%E6%B4%9B%E5%A4%A9%E4%BE%9D%EF%BC%89.mp3',
      pic: '/images/aplayer/泡泡Hansy - 拼凑的断音（Cover 洛天依）.webp',
    }]
  });
</script>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-tv"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">千灵夙赋</span>
</div>

        
<div class="busuanzi-count">
  <script pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-"></i>你是第
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>位到访的小伙伴喔
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-"></i>本站已被访问
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>次啦
      </span>
    </span>
</div>






  <script pjax>
  function leancloudSelector(url) {
    url = encodeURI(url);
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.getAttribute('id'));
      var title = visitors.getAttribute('data-flag-title');

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
              leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .catch(error => {
                console.error('Failed to save visitor count', error);
              })
          } else {
              Counter('post', '/classes/Counter', { title: title, url: url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.getAttribute('id'));
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (let item of results) {
            let { url, time } = item;
            leancloudSelector(url).innerText = time;
          }
          for (let url of entries) {
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=zulMeib4pyC6zB1a65OmVtHz-gzGzoHsz')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method: method,
          headers: {
            'X-LC-Id'     : 'zulMeib4pyC6zB1a65OmVtHz-gzGzoHsz',
            'X-LC-Key'    : 'TEjUlOUBz3KwSUmDQ35ROxpw',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.getAttribute('pjax') !== null) {
      script.setAttribute('pjax', '');
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  
  <script pjax>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>



  <script pjax>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id    : 8657,
      el    : 'wpac-rating',
      color : '5bc0de'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>

  
<script src="/js/local-search.js"></script>













    <div id="pjax">
  

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout: 3000,
        priority: true,
        ignores: [uri => uri.includes('#'),uri => uri == 'https://qianling.pw/hexo-optimization/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('https://qianling-1254036047.cos.ap-chengdu.myqcloud.com/js/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'zulMeib4pyC6zB1a65OmVtHz-gzGzoHsz',
      appKey     : 'TEjUlOUBz3KwSUmDQ35ROxpw',
      placeholder: "biu biu~　||ヽ(*￣▽￣*)ノミ|Ю",
      avatar     : 'wavatar',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>
</body>
</html>
